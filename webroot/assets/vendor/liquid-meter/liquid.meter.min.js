!function(t){"use strict";var i={shape:"circle",color:"#82BF41",background:"#4C4C52",stroke:"#23282F",textColor:"#FFFFFF",fontFamily:"Open Sans",fontSize:"24px",fontWeight:"600",liquidOpacity:.9,liquidPalette:["#82BF41"],speed:3e3,animate:!0},e=function(i,e){if("undefined"==typeof Snap)throw"Snap.js not found.";this.meter=t(i),this.options=e,this.options.text=this.meter.text(),this.init()};function o(t,i){var e=parseInt(t.slice(1),16),o=Math.round(2.55*i||0),r=(e>>16)+o,n=(e>>8&255)+o,s=(255&e)+o;return"#"+(16777216+65536*(r<255?r<1?0:r:255)+256*(n<255?n<1?0:n:255)+(s<255?s<1?0:s:255)).toString(16).slice(1).toUpperCase()}e.prototype={init:function(i,e){if(this.wrapper=this.meter.parent(".liquid-meter"),!this.wrapper.get(0)){var o=t("<div>").attr({class:"liquid-meter"});this.wrapper=this.meter.wrap(o).parent()}var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("preserveAspectRatio","xMidYMid meet"),r.setAttribute("viewBox","0 0 220 220"),this.wrapper.prepend(r),this.svg=t(r).attr({width:"100%",height:"100%"}),this.frames=[[6,-6,-10,6,13,-10],[6,-5,-13,4,31,-5],[7,-5,-9,0,31,-5],[7,-5,-9,-6,30,-6],[6,-10,-10,-10,33,-4],[8,-4,-8,-13,38,7],[8,-8,-5,-15,55,11],[7,-19,-2,-16,33,16],[3,-23,-2,-16,42,21],[3,-22,7,-18,27,21],[2,-26,15,-18,25,20],[-3,-23,18,-18,26,19],[-6,-40,18,-18,22,22],[-15,-16,23,-13,37,22],[-15,-16,23,-13,37,22],[-17,-16,23,-10,33,22],[-18,-16,23,-10,35,21],[-20,-12,23,-5,34,20],[-22,-13,20,-1,35,22],[-22,-13,20,5,32,21],[-21,-16,19,8,34,15],[-23,-16,16,10,36,9],[-22,-23,13,10,48,0],[-23,-20,13,8,45,-6],[-20,-22,7,10,44,-6],[-20,-22,5,10,42,-7],[-18,-20,0,10,41,-8],[-15,-22,-7,10,41,-8],[-11,-33,-8,10,41,-8],[-7,-36,-6,10,15,-11],[0,-39,-8,10,15,-11],[0,-36,-8,7,15,-11]],this.paper=Snap(r),this.draw(),this.observe(),this.options.animate?this.animate():this.drawFrame(1),this.wrapper.addClass("liquid-meter-loaded"),this},draw:function(){this.value=parseInt(this.meter.val()||this.meter.attr("value"),10);var t=this.paper;this.recipient=t.circle(110,110,95);var i=this.makeGradient(this.options.background);this.recipient.attr({fill:i,stroke:this.options.stroke,strokeWidth:15});var e=t.circle(110,110,87);return e.attr({fill:"#FFFFFF"}),this.liquid=t.path(),this.liquid.attr({id:"front",fill:this.options.color,mask:e,stroke:o(this.options.color,20),strokeWidth:1}),this.label=t.text("50%","50%",[this.value,"%"]),this.label.attr({fill:this.options.textColor,dy:".4em","font-family":this.options.fontFamily,"font-size":this.options.fontSize,"font-weight":this.options.fontWeight,"text-anchor":"middle",stroke:this.options.textColor}),this.label.selectAll("tspan:nth-child(2)").attr({"font-size":"24",stroke:"none"}),this},observe:function(){var i=this;this.meter.on("change",function(){i.set(t(this).val())})},set:function(t){var i=parseInt(t,10);this.meter.val(i),this.value=i,this.label.node.textContent=i+"%"},liquidPalette:function(t){this.options.liquidPalette=t},background:function(t){this.options.background=t},stroke:function(t){this.options.stroke=t},color:function(t){this.options.color=t,this.liquid.attr({fill:this.options.color,stroke:o(this.options.color,20)})},makeGradient:function(t){return this.paper.gradient(Snap.format("L(0, 0, 100, 100){color.top}-{color.bottom}",{color:{top:o(t,6),bottom:t}}))},makePath:function(t,i,e,o,r,n,s){var a=1.76*(100-t)+22;return Snap.format("M0,{left} C{curve.x1},{curve.y1} {curve.x2},{curve.y2} 220,{right} L220,220 L0,220 z",{left:a-(i||0),right:a-(r||0),curve:{x1:e+a,y1:o+a,x2:n+a,y2:s+a}})},drawFrame:function(t){var i=this.frames[t-1],e=i[0],o=i[1],r=i[2],n=i[3],s=i[4],a=i[5];this.liquid.attr({d:this.makePath(this.value,e,o,r,n,s,a)})},animate:function(){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,0)},i=this.frames.length,e=this.options.speed/i,o=1,r=this.drawFrame.bind(this);return function n(){t(function(){r(o),++o>=i&&(o=1)}),setTimeout(n,e)}(),this}},t.fn.liquidMeter=function(o,r){var n="string"==typeof o&&!!r;return n||(o=t.extend({},i,o)),this.map(function(){var i=t(this).data("liquid-meter");return i||(i=new e(this,o),t(this).data("liquid-meter",i)),n&&i[o](r),i})}}(jQuery);